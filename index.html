<html>
	<head>
		<title>ECC Workflow Designer</title>

		<!-- 
		LiveReload support.
		http://livereload.com/
		-->
		<script src="http://localhost:35729/livereload.js?snipver=1"></script>

		<link rel="stylesheet" href="css/forms.css">
		<link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />
	</head>	
	<body 
		ng-app="app" 
		ng-controller="AppCtrl"
		mouse-capture
		ng-keydown="keyDown($event)"
		ng-keyup="keyUp($event)"
		ng-click="hideContextMenu()"
		>

		<!-- Modal for error connecting to the server -->
		<div class="modal" id="connectionErrorModal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Server Offline</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<p>The server is currently offline.</p>
					</div>
				</div>
			</div>
		</div>

		<div class='app-container' style="width: 100%; overflow: hidden;">
		    <div class="json-container" style="float: left;">
				<div class="json-content">
					<textarea 
						id="json-textarea"
						style="width: 100%; height: 100%;"
						chart-json-edit
						view-model="chartViewModel"
						>
					</textarea>
				</div>
			</div>
		    <div class="flowchart-container">
				<div class="container d-flex justify-content-center align-items-center">
					<div class="btn-group">
						<button
						ng-click="toggleJsonButton()"
						class="btn btn-primary">
						Hide JSON
						</button> 
						<button
						ng-click="findMatch()"
						class="btn btn-primary"
						title="Finds match between default catalog and workflow"
						>
						Find Match
						</button>
						<div class="btn-group" role="group">
							<button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
							Add node
							</button>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" ng-click="addDevice()">Add Device</a></li>
								<li><a class="dropdown-item" ng-click="addComputation()">Add Computation</a></li>
								<li><a class="dropdown-item" ng-click="addStorage()">Add Storage</a></li>
								<li><a class="dropdown-item" ng-click="addCommunication()">Add Communication</a></li>
							</ul>
						</div>
						<button
						ng-click="saveFile()"
						class="btn btn-primary"
						title="Save the current workflow"
						>
						Save
						</button>
						<button
						ng-click="loadFile()"
						class="btn btn-primary"
						title="Load a workflow"
						>
						Load
						</button>
					</div>	
				</div>
				
				<!--
				This custom element defines the flowchart.
				-->
			    <flow-chart
		    		style="margin: 5px;"
			      	chart="chartViewModel"
					class="zoom-element"
					ng-style="{'transform': 'scale(' + scale + ')'}"
					on-wheel="handleWheel($event)"
			      	>
			    </flow-chart>
		    </div>
		</div>

		<link rel="stylesheet" type="text/css" href="app.css">

		<!-- Library code. -->
		<script src="lib/jquery-2.0.2.js" type="text/javascript"></script>
		<script src="lib/angular.js" type="text/javascript"></script>

		<!-- Flowchart code. -->
		<script src="debug.js" type="text/javascript"></script>
		<script src="flowchart/svg_class.js" type="text/javascript"></script>
		<script src="flowchart/mouse_capture_service.js" type="text/javascript"></script>
		<script src="flowchart/dragging_service.js" type="text/javascript"></script>
		<script src="flowchart/flowchart_viewmodel.js" type="text/javascript"></script>
		<script src="flowchart/directives/flowchart_directive.js" type="text/javascript"></script>
		<script src="flowchart/directives/flowchart_device_directive.js" type="text/javascript"></script>
		<!-- App code. -->
		<script src="app.js" type="text/javascript"></script>
		<script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"
        ></script>
	</body>
</html>